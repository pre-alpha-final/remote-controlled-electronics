@page "/"

@inject AuthService AuthService
@inject NavigationManager NavigationManager
@inject RceDataService RceDataService

@if (!AuthService.UserAuthenticated)
{
	<MasonryContainer Options=@(new { fitWidth = true }) @ref="MasonryContainer">
		@foreach (var worker in RceDataService.Workers)
		{
			<MasonryItem>
				<WorkerComponent Worker="worker" OnUpdate="OnWorkerUpdate" />
			</MasonryItem>
		}
	</MasonryContainer>
}

@code {
	private MasonryContainer MasonryContainer;

	protected override void OnInitialized()
	{
		if (AuthService.UserAuthenticated == false)
		{
			//NavigationManager.NavigateTo("/auth/login");
		}
	}

	private async Task OnWorkerUpdate()
	{
		await MasonryContainer.Refresh();
	}
}
