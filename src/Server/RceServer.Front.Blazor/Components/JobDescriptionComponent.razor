@using RceServer.Domain.Models

<div class="job mx-0 mx-sm-1 mt-3">
	<div class="card pt-3 px-3">
		<div><h4>@JobDescription.Name</h4></div>
		@foreach (var jobDescriptionLine in JobDescription.Description)
		{
			<div class="ml-3"><h6>@jobDescriptionLine</h6></div>
		}
		<div class="d-flex justify-content-center py-3">
			<button type="button" class="btn btn-lg btn-success mr-3">Run Default</button>
			<button type="button" class="btn btn-lg btn-info">Run Custom</button>
		</div>
		<div class="d-flex justify-content-center p-1">
			<div>
				<div @onclick="ToggleLog"><i class="fas fa-angle-double-down"></i> Show logs <i class="fas fa-angle-double-down"></i></div>
				<Collapsible Collapsed="_isLogCollapsed">
					front<br />Lorem ipsum<br />Lorem ipsum<br />Lorem ipsum<br />Lorem ipsum<br />Lorem ipsum<br />Lorem ipsum<br />Lorem ipsum<br />Lorem ipsum<br />
				</Collapsible>
			</div>
		</div>
	</div>
</div>

@code {
	private bool _isLogCollapsed = true;

	[Parameter]
	public JobDescription JobDescription { get; set; }
	[Parameter]
	public EventCallback OnUpdate { get; set; }

	private void ToggleLog()
	{
		_isLogCollapsed = !_isLogCollapsed;
	}

	protected override async Task OnAfterRenderAsync(bool firstRender)
	{
		await OnUpdate.InvokeAsync(null);
	}
}
